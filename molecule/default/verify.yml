---
# This is an example playbook to execute Ansible tests.

- name: Verify
  hosts: all
  tasks:
    - name: Populate config file.
      stat:
        path: "{{ enketo_checkout_path }}/config/config.json"
      register: config_file

    - name: Fail if config file does not exist
      fail:
      when: not config_file.stat.exists

    - name: Check that host file belongs to correct group
      fail:
      when: not host_file.stat.gr_name == ""{{ enketo_group }}""

    - name: Check that host file belongs to correct user
      fail:
      when: not host_file.stat.pw_name == ""{{ enketo_user }}""
